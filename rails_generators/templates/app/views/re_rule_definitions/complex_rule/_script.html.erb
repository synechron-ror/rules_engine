<%% javascript_tag do %>
  var new_<%=rule_name%> = '<%%=escape_javascript(render("/re_rule_definitions/<%=rule_name%>_rule/word"))%>'  
  
  var updateWorkflowAction = function() {
    if ($('#<%=rule_name%>_workflow_action').attr('value') == "start_workflow")
    {
      $('#<%=rule_name%>_workflow').re_form_enable();
      $('#<%=rule_name%>_workflow').removeAttr("disabled");      
    } else {
      $('#<%=rule_name%>_workflow').re_form_disable();
      $('#<%=rule_name%>_workflow').attr("disabled", true); 
    }      
  }

  $(document).ready(function() {	
    $('#rule_title').focus();	
    $("#<%=rule_name%>_workflow").autocomplete('/re_workflows/lookup?t=code', { multiple: false });
    
    $('#<%=rule_name%>_workflow_action').change(function() {
      updateWorkflowAction();
    });    
    
    updateWorkflowAction();
  });

<%% end %>
