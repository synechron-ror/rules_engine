<%% javascript_tag do %>
  var new_<%=rule_name%> = '<%%=escape_javascript(render(:partial => "/re_rule_definitions/<%=rule_name%>_rule/word"))%>'  
  
  var updatePipelineAction = function() {
    if ($('#<%=rule_name%>_pipeline_action').attr('value') == "start_pipeline")
    {
      $('#<%=rule_name%>_pipeline').re_form_enable();
      $('#<%=rule_name%>_pipeline').removeAttr("disabled");      
    } else {
      $('#<%=rule_name%>_pipeline').re_form_disable();
      $('#<%=rule_name%>_pipeline').attr("disabled", true); 
    }      
  }

  $(document).ready(function() {	
    $('#rule_title').focus();	
    $("#<%=rule_name%>_pipeline").autocomplete('/re_pipelines/lookup?t=code', { multiple: false });
    
    $('#<%=rule_name%>_pipeline_action').change(function() {
      updatePipelineAction();
    });    
    
    updatePipelineAction();
  });

<%% end %>
